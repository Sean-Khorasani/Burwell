{
  "description": "DeepSeek automation test using proven Firefox tab navigation logic",
  "parameters": {},
  "sequence": [
    {
      "comment": "Step 1: Minimize all windows first (proven approach from test_firefox_automation_proven.cpp)",
      "command": "EXECUTE_SCRIPT",
      "parameters": {
        "script_path": "test_scripts/minimize_all_wins.json"
      }
    },
    {
      "command": "WAIT",
      "parameters": {
        "duration": "500ms"
      }
    },
    {
      "comment": "Step 2: Find all Firefox windows using MozillaWindowClass",
      "command": "UIA_ENUM_WINDOWS",
      "parameters": {
        "class_name": "MozillaWindowClass",
        "store_as": "firefoxWindows"
      }
    },
    {
      "comment": "Step 3: Comprehensive search - ALL windows, ALL tabs",
      "comment2": "Search every tab in every Firefox window systematically",
      "command": "EXECUTE_SCRIPT",
      "parameters": {
        "script_path": "test_scripts/comprehensive_firefox_search_proper.json",
        "result_variable": "deepseekFound"
      }
    },
    {
      "command": "UIA_GET_CLIPBOARD",
      "parameters": {
        "store_as": "searchResult"
      }
    },
    {
      "command": "IF_CONTAINS",
      "parameters": {
        "variable": "searchResult",
        "substring": "DEEPSEEK_NOT_FOUND",
        "store_as": "deepseekNotFound"
      }
    },
    {
      "command": "CONDITIONAL_STOP",
      "parameters": {
        "condition_variable": "deepseekNotFound"
      }
    },
    {
      "command": "WAIT",
      "parameters": {
        "duration": "1s"
      }
    },
    {
      "comment": "Step 4: Clear the prompt input area (only if DeepSeek found)",
      "command": "UIA_KEY_PRESS",
      "parameters": {
        "key": "VK_CONTROL"
      }
    },
    {
      "command": "UIA_KEY_PRESS",
      "parameters": {
        "key": "A"
      }
    },
    {
      "command": "UIA_KEY_RELEASE",
      "parameters": {
        "key": "A"
      }
    },
    {
      "command": "UIA_KEY_RELEASE",
      "parameters": {
        "key": "VK_CONTROL"
      }
    },
    {
      "command": "WAIT",
      "parameters": {
        "duration": "200ms"
      }
    },
    {
      "command": "UIA_KEY_PRESS",
      "parameters": {
        "key": "VK_DELETE"
      }
    },
    {
      "command": "UIA_KEY_RELEASE",
      "parameters": {
        "key": "VK_DELETE"
      }
    },
    {
      "comment": "Step 5: Type the prompt using clipboard (safer for long text)",
      "command": "UIA_SET_CLIPBOARD",
      "parameters": {
        "text": "What is the best template for a software engineer's resume?"
      }
    },
    {
      "command": "UIA_KEY_PRESS",
      "parameters": {
        "key": "VK_CONTROL"
      }
    },
    {
      "command": "UIA_KEY_PRESS",
      "parameters": {
        "key": "V"
      }
    },
    {
      "command": "UIA_KEY_RELEASE",
      "parameters": {
        "key": "V"
      }
    },
    {
      "command": "UIA_KEY_RELEASE",
      "parameters": {
        "key": "VK_CONTROL"
      }
    },
    {
      "command": "WAIT",
      "parameters": {
        "duration": "500ms"
      }
    },
    {
      "comment": "Step 6: Press Enter to submit prompt",
      "command": "UIA_KEY_PRESS",
      "parameters": {
        "key": "VK_RETURN"
      }
    },
    {
      "command": "UIA_KEY_RELEASE",
      "parameters": {
        "key": "VK_RETURN"
      }
    },
    {
      "comment": "Step 7: Wait for response to start generating",
      "command": "WAIT",
      "parameters": {
        "duration": "3s"
      }
    },
    {
      "comment": "Step 8: Check response status multiple times (manual loop)",
      "command": "EXECUTE_SCRIPT",
      "parameters": {
        "script_path": "test_scripts/check_deepseek_status.json",
        "result_variable": "check1"
      }
    },
    {
      "command": "WAIT",
      "parameters": {
        "duration": "3s"
      }
    },
    {
      "command": "EXECUTE_SCRIPT",
      "parameters": {
        "script_path": "test_scripts/check_deepseek_status.json",
        "result_variable": "check2"
      }
    },
    {
      "command": "WAIT",
      "parameters": {
        "duration": "3s"
      }
    },
    {
      "command": "EXECUTE_SCRIPT",
      "parameters": {
        "script_path": "test_scripts/check_deepseek_status.json",
        "result_variable": "check3"
      }
    },
    {
      "command": "WAIT",
      "parameters": {
        "duration": "3s"
      }
    },
    {
      "command": "EXECUTE_SCRIPT",
      "parameters": {
        "script_path": "test_scripts/check_deepseek_status.json",
        "result_variable": "check4"
      }
    },
    {
      "command": "WAIT",
      "parameters": {
        "duration": "3s"
      }
    },
    {
      "command": "EXECUTE_SCRIPT",
      "parameters": {
        "script_path": "test_scripts/check_deepseek_status.json",
        "result_variable": "check5"
      }
    },
    {
      "comment": "Final: Check if response was captured",
      "command": "SYSTEM_COMMAND",
      "parameters": {
        "command": "if exist deepseek_response.txt (type deepseek_response.txt) else (echo No response captured yet)"
      }
    }
  ]
}